<section id="mapa-asientos">
    <!-- Encabezado -->
    <div class="content-block intro-block">
        <h1>Mapa Interactivo de Asignación de Asientos</h1>
    </div>
    <!-- Botón de personalización -->
    <button class="customization-button" id="toggle-panel">⚙</button>
    <div id="customization-panel">
        <h4>Personalización Básica</h4>
        <div>
            <label for="background-color">Color de fondo:</label>
            <input type="color" id="background-color" value="#f9f9f9">
        </div>
        <div>
            <label for="seat-size">Tamaño de los asientos:</label>
            <input type="range" id="seat-size" min="20" max="60" value="30">
        </div>
        <div>
            <label for="seat-color">Color de los asientos:</label>
            <input type="color" id="seat-color" value="#90ee90">
        </div>
        <h4>Personalización Avanzada</h4>
        <div>
            <label for="seat-hover-color">Color al pasar el cursor:</label>
            <input type="color" id="seat-hover-color" value="#ffa500">
        </div>
        <div>
            <label for="occupied-color">Color de ocupados:</label>
            <input type="color" id="occupied-color" value="#ff4d4d">
        </div>
        <h4>Funciones Interactivas</h4>
        <div>
            <button class="btn btn-primary w-100 mb-2" id="randomize-seats">Asignar aleatoriamente</button>
        </div>
        <div>
            <button class="btn btn-danger w-100 mb-2" id="reset-customizations">Restablecer</button>
        </div>
    </div>

    <div class="content-block">
        <!-- Barra lateral fija -->
        <div id="sidebar">
            <!-- Botón para colapsar/expandir -->
            <button id="collapse-toggle" class="collapse-btn">
                <i class="fas fa-angle-double-left"></i>
            </button>
        </div>
        <div class="content-block">
            <div class="sidebar-section">
                <h5><i class="fas fa-tools"></i> <span class="label">Herramientas</span></h5>
            </div>

            <div class="sidebar-section">
                <h6><i class="fas fa-cogs"></i> <span class="label">Operaciones</span></h6>
                <button id="assign-row"><i class="fas fa-arrows-alt-h"></i> <span class="label">Asignar
                        Fila</span></button>
                <button id="assign-column"><i class="fas fa-arrows-alt-v"></i> <span class="label">Asignar
                        Columna</span></button>
                <button id="create-row"><i class="fas fa-plus" title="Crear Fila"></i> <span class="label">Crear
                        Fila</span></button>
                <button id="create-column"><i class="fas fa-plus" title="Crear Columna"></i> <span class="label">Crear
                        Columna</span></button>
                <button id="delete-row"><i class="fas fa-trash-alt" title="Eliminar Fila"></i> <span
                        class="label">Eliminar
                        Fila</span></button>
                <button id="delete-column"><i class="fas fa-trash-alt" title="Eliminar Columna"></i> <span
                        class="label">Eliminar
                        Columna</span></button>
            </div>
        </div>
        <div class="content-block">

            <div class="sidebar-section">
                <h6><i class="fas fa-fill-drip"></i> <span class="label">Llenado</span></h6>
                <button id="fillRow"><i class="fas fa-fill"></i> <span class="label">Llenar Fila</span></button>
                <button id="fillColumn"><i class="fas fa-fill"></i> <span class="label">Llenar Columna</span></button>
            </div>
        </div>
        <div class="sidebar-section">
            <h6><i class="fas fa-sync-alt"></i> <span class="label">Reinicio</span></h6>
            <button id="resetSeats"><i class="fas fa-undo"></i> <span class="label">Reiniciar</span></button>
        </div>

        <div class="sidebar-section">
            <h6><i class="fas fa-file-export"></i> <span class="label">Archivos</span></h6>
            <button id="exportSeats"><i class="fas fa-download"></i> <span class="label">Exportar</span></button>
            <button id="importButton"><i class="fas fa-upload"></i> <span class="label">Importar</span></button>
            <input type="file" id="importSeats" style="display:none;">
        </div>

        <div class="sidebar-section">
            <h6><i class="fas fa-chair"></i> <span class="label">Reservas</span></h6>
            <button id="reserveSeats"><i class="fas fa-lock"></i> <span class="label">Reservar</span></button>
        </div>
    </div>



    <!-- Información de asientos -->
    <div id="seat-count">
        <p class="text-center">Asientos ocupados: <span id="occupiedCount">0</span> / Asientos disponibles: <span
                id="availableCount">100</span></p>
    </div>
    <div class="container">
        <!-- Auditorio con asientos -->
        <div id="auditorium"></div>
    </div>
    <div class="container">
        <!-- Gestión de usuarios -->
        <aside class="user-management">
            <h2>Gestión de Usuarios</h2>

            <!-- Formulario de inicio de sesión -->
            <form id="loginForm">
                <input type="text" id="username" placeholder=" " required>
                <label for="username">Usuario:</label>
                <input type="password" id="password" placeholder=" " required>
                <label for="password">Contraseña:</label>
                <button type="submit">Iniciar Sesión</button>
            </form>
            <!-- Muestra el rol del usuario -->
            <p>Rol actual: <span id="currentRole">Sin asignar</span></p>
        </aside>
    </div>
</section>
<script>
    const rows = 10; // Número de filas
    const cols = 10; // Número de columnas
    let currentRows = rows;
    let currentCols = cols;
    const auditorium = document.getElementById("auditorium"); // Contenedor del Auditorio

    // Crear el auditorio con los asientos
    function createAuditorium() {
        auditorium.innerHTML = ''; // Limpiar el auditorio antes de crear nuevos asientos
        for (let i = 0; i < currentRows; i++) {
            for (let j = 0; j < currentCols; j++) {
                const seat = document.createElement("div");
                seat.classList.add("seat");
                seat.setAttribute("data-row", i);
                seat.setAttribute("data-col", j);
                seat.addEventListener("click", toggleSeat);
                auditorium.appendChild(seat);
            }
        }
        updateCount();
    }
    // Función de inicio de sesión
    document.getElementById("loginForm").addEventListener("submit", (e) => {
        e.preventDefault();
        const username = document.getElementById("username").value.trim();
        const password = document.getElementById("password").value.trim();

        // Verificamos las credenciales y asignamos el rol
        if (username === "admin" && password === "admin123") {
            currentRole = "admin";  // Rol de administrador
            alert("Bienvenido Administrador");
        } else {
            currentRole = "user";  // Rol de usuario normal
            alert("Bienvenido Usuario Regular");
        }

        // Guardamos el rol en localStorage para persistencia
        localStorage.setItem("role", currentRole);
        toggleFeatures();  // Actualizamos las funcionalidades disponibles según el rol
    });

    // Al cargar la página, obtenemos el rol almacenado en localStorage
    window.onload = function () {
        const storedRole = localStorage.getItem("role");
        if (storedRole) {
            currentRole = storedRole;
            toggleFeatures();  // Actualizamos las funcionalidades según el rol
        }
    };

    // Función para habilitar o deshabilitar funcionalidades según el rol del usuario
    function toggleFeatures() {
        const adminFeatures = ["fillRow", "fillColumn", "exportSeats", "reserveSeats"];
        adminFeatures.forEach((id) => {
            document.getElementById(id).disabled = currentRole !== "admin";  // Solo el admin puede usar estos botones
        });
        document.getElementById("currentRole").textContent = currentRole === "admin" ? "Administrador" : "Usuario Regular";  // Mostramos el rol actual
    }

    // Cambiar el estado de un asiento (ocupado o disponible)
    function toggleSeat(event) {
        const seat = event.target;
        seat.classList.toggle("occupied");
        updateCount();
    }

    // Actualizar el conteo de ocupados y disponibles
    function updateCount() {
        const occupiedSeats = document.querySelectorAll(".seat.occupied").length;
        const totalSeats = currentRows * currentCols;
        const availableSeats = totalSeats - occupiedSeats;
        document.getElementById("occupiedCount").textContent = occupiedSeats;
        document.getElementById("availableCount").textContent = availableSeats;
    }
    // Mostrar modal al cargar la página
    window.onload = function () {
        document.getElementById('loginModal').style.display = 'flex';
    };

    // Cerrar modal (puedes agregar validación aquí)
    function cerrarModal() {
        const usuario = document.getElementById("usuario").value;
        const clave = document.getElementById("clave").value;

        // Validación simple
        if (usuario && clave) {
            document.getElementById('loginModal').style.display = 'none';
        } else {
            alert("Por favor completa todos los campos.");
        }
    }
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="index_2.js"></script>
<script src="Tools Panel.js"></script>