<section id="eventos-noticias">
    <h2>Eventos / Noticias</h2>
    <div class="content-block intro-block">
        <h3>Mant√©ngase Conectado e Informado</h3>
        <p>Descubra lo que est√° sucediendo en la Iglesia Asambleas de Dios "El Puerto". Aqu√≠ encontrar√° un resumen de
            nuestros pr√≥ximos eventos, las noticias m√°s recientes y una galer√≠a visual para revivir los momentos
            especiales de nuestra comunidad de fe.</p>
    </div>
    <div class="content-block">
        <h3>Calendario de Eventos</h3>
        <p>Mant√©ngase informado sobre nuestras pr√≥ximas conferencias, seminarios, servicios especiales y actividades
            comunitarias. Planifique su participaci√≥n y sea parte de experiencias que edificar√°n su vida. <a
                href="#calendary" class="btn secondary-btn"><i class="fas fa-calendar-check"></i> Ver calendario
                completo.</a></p>
        <!--div class="event-cards-grid">
            <div class="event-card">
                <h4>Conferencia Anual de Familias</h4>
                <p><i class="fas fa-calendar-day"></i> 15-17 de Noviembre</p>
                <p><i class="fas fa-map-marker-alt"></i> Centro de Convenciones [Ciudad]</p>
                <p>Talleres para padres, j√≥venes y ni√±os. Un tiempo para fortalecer los lazos familiares.</p>
            </div>
            <div class="event-card">
                <h4>Ayuno y Oraci√≥n Nacional</h4>
                <p><i class="fas fa-calendar-day"></i> 10 de Diciembre</p>
                <p><i class="fas fa-globe"></i> En todas las iglesias afiliadas</p>
                <p>Unidos en un prop√≥sito, buscando el rostro de Dios por nuestra naci√≥n y concilio.</p>
            </div>
            <div class="event-card">
                <h4>Cena de Gala de Fin de A√±o</h4>
                <p><i class="fas fa-calendar-day"></i> 28 de Diciembre</p>
                <p><i class="fas fa-map-marker-alt"></i> Sal√≥n de Eventos [Ciudad]</p>
                <p>Celebrando los logros del a√±o y proyectando el futuro con gratitud y esperanza.</p>
            </div-->
    </div>
    <div class="content-block">
        <h3>üìÖ Eventos de esta Semana</h3>
        <p>Descubre los pr√≥ximos eventos de la Iglesia Asambleas de Dios "El Puerto". Cada semana tenemos
            actividades que fortalecen la fe, el compa√±erismo y el servicio a Dios.</p>

        <div class="content-block">
            <div id="eventCarousel" class="carousel slide" data-bs-ride="carousel" data-bs-interval="6000">
                <div class="carousel-inner" id="carouselContent">
                    <div class="text-center text-muted py-4">Cargando eventos...</div>
                </div>

                <button class="carousel-control-prev" type="button" data-bs-target="#eventCarousel"
                    data-bs-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#eventCarousel"
                    data-bs-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                </button>
            </div>
        </div>
</section>

<script>
    async function cargarEventos() {
        try {
            const response = await fetch('assets/jss/eventos.json');
            const eventos = await response.json();

            const hoy = new Date();
            const inicioSemana = new Date(hoy);
            inicioSemana.setDate(hoy.getDate() - hoy.getDay());
            const finSemana = new Date(inicioSemana);
            finSemana.setDate(inicioSemana.getDate() + 6);

            const eventosSemana = eventos.filter(e => {
                const fecha = new Date(e.fecha_inicio);
                return fecha >= inicioSemana && fecha <= finSemana;
            });

            mostrarEventos(eventosSemana);
        } catch (error) {
            document.getElementById('carouselContent').innerHTML =
                "<div class='text-danger py-4'>Error cargando eventos.</div>";
        }
    }

    function mostrarEventos(eventos) {
        const contenedor = document.getElementById('carouselContent');
        contenedor.innerHTML = '';

        if (eventos.length === 0) {
            contenedor.innerHTML = "<div class='text-muted py-4'>No hay eventos esta semana.</div>";
            return;
        }

        eventos.forEach((evento, i) => {
            const item = document.createElement('div');
            item.className = `carousel-item ${i === 0 ? 'active' : ''}`;
            item.innerHTML = `
                <div class="ministry-item mx-auto" style="max-width: 700px;">
                    <img src="${evento.imagen}" alt="${evento.nombre}">
                    <div class="ministry-item-content">
                        <h4>${evento.nombre}</h4>
                        <p><strong>üìç Lugar:</strong> ${evento.lugar}</p>
                        <p><strong>üïí Hora:</strong> ${evento.hora}</p>
                        <p><strong>üìÖ Fecha:</strong> ${evento.fecha_inicio}</p>
                        <p>${evento.descripcion}</p>
                    </div>
                </div>`;
            contenedor.appendChild(item);
        });
    }

    cargarEventos();
</script>
</div>
<div class="content-block">
    <h3>Noticias Recientes</h3>
    <p>Las √∫ltimas novedades y acontecimientos importantes de nuestra iglesia, manteni√©ndolo al d√≠a con
        nuestro impacto, desarrollo y testimonios. <a href="#" class="btn secondary-btn"><i
                class="fas fa-newspaper"></i> Leer m√°s noticias.</a></p>
    <div class="news-grid">
        <a href="#" class="news-item">
            <img src="news-event-1.png" alt="Noticia 4">
            <div class="news-item-content">
                <h4>Inauguraci√≥n de Nueva Iglesia en [Comunidad]</h4>
                <p>Celebramos con gozo la apertura de un nuevo punto de luz en la comunidad, bendiciendo
                    a cientos de familias.</p>
                <span class="read-more">Leer m√°s <i class="fas fa-chevron-right"></i></span>
            </div>
        </a>
        <a href="#" class="news-item">
            <img src="community-outreach.png" alt="Noticia 5">
            <div class="news-item-content">
                <h4>Gran Jornada M√©dica y Social Comunitaria</h4>
                <p>Miles de personas beneficiadas con servicios m√©dicos, alimentos y ropa gracias a
                    nuestros voluntarios.</p>
                <span class="read-more">Leer m√°s <i class="fas fa-chevron-right"></i></span>
            </div>
        </a>
    </div>
</div>
<div class="content-block">
    <h3>Galer√≠a de Fotos y Videos</h3>
    <p>Reviva los momentos m√°s memorables de nuestros eventos, conferencias y actividades a trav√©s de
        nuestra galer√≠a visual. Pr√≥ximamente encontrar√° fotos y videos inspiradores que capturan la
        esencia de nuestra iglesia y la alegr√≠a de nuestra fe.</p>
    <a href="https://photos.app.goo.gl/MtAJhcN67cpm3Zpn6" class="btn secondary-btn"><i class="fas fa-images"></i>
        Explorar galer√≠a.</a>
</div>
</section>